# 2020 SNUST Dept. DataScience Spring Semester Database System Team Project

## <b1> <center> 사이트별 일간 인기순위 차트 수집을 통한 음원사이트 동향 분석 </center> </b1>

### <center> 박종환 <tr> 배현정 <tr> 이건규 </center>  
### <center> 서울과학기술대학교 데이터사이언스학과 </center> 

 현재 국내의 음악시장에서는 벅스 뮤직, 네이버 바이브, 멜론, 지니 뮤직, 몽키 뮤직등과 같은 국내 음원 사이트 뿐만 아니라 스포티파이, 유튜브 뮤직, 샤잠, 애플뮤직, 아마존 뮤직등과 같은 해외 음원 사이트까지 무수하게 많은 음원사이트들이 서비스 되고 있다. 이러한 사이트들은 주로 사용하는 연령대, 성별, 직군 등에 따라 그날 그날의 인기순위가 서로 다른 모습을 보이고 있다.   
 따라서 이러한 사이트들의 인기순위를 한곳에 모아 비교 및 분석을 한다면 비교적 다양하게 국내에 존재하는 음악팬들의 공통적인 취향과 연령대나 성별, 직군 등을 가르지 않고 사랑을 받는 장르 또는 가수가 누군지에 대하여 간접적으로나마 알 수 있다.   
 마찬가지로 각각의 음원 사이트들의 분석결과는 해당 사이트들이 어느 계층 혹은 어느 연령대의 유저들을 공략하는 것이 유리한지에 대한 간접적인 정보를 흭득 할 수 있고, 이는 각 음원 사이트들의 마케팅 또는 프로모션을 개발하는 대에 있어서 많은 참조를 할 수 있게 해준다.  
 그러므로 해당 프로젝트에서 우리 팀은 매일 고정된 시간에 일단위의 인기차트를 각 사이트 별로 수집을 하여 Database에 저장을 시켜 분석을 하려고 한다.

 #### <left> Key Idea : 국내외 음원사이트에서 일 단위 인기순위 추출 및 저장 후 분석

 ### 1. Introduction.
현재 세계 각 곳의 음원시장은 점차 커져가는 추세이다. 특히 국내의 경우 2012년도 이후로 오프라인 음반시장의 규모는 점점 작아지지만 2016년 이후 작아진 규모보다 더 크게 온라인 음원시장의 규모가 커지는 현상을 보였다, 특히 스트리밍 시장의 경우 글로벌 시장규모가 240억달러 (약 28조원) 규모에 이르는 어마어마하게 커다란 시장이 되었다.  <br>
따라서 이를 수집하여 비교하는 작업은 국내 뿐만 아니라 글로벌 시장에서 음악을 듣는 유저들이 주로 어떠한 장르의 음악을 좋아하고 많이 드는지 확인 할 수 있게 된다. 이러한 과정을 통하여 아티스트, 회사의 입장에서 조금 더 사람들이 좋아 할 노래를 만들고 음원으로 발매하는 것에 있어서 도움을 줄 수 있다.

### 2. Columns.

다음 `<표1-수집되는 데이터에 따른 타입과 컬럼명>`와 같이 DB에는 다음과 같은 데이터들이 저장이 된다.
| `데이터 타입` |`컬럼 이름`|`NULL 허용`|
| :---: | :---:| :---: |
| Key | ID |  |
| Date | 날짜 |  |
| nvarchar | 노래제목 |  |
| nvarchar | 아티스트명 |  |
| nvarchar | 앨범명 |  |
| int | 멜론 순위 | [x] |
| int | 지니 뮤직 순위 | [x] |
| int | 바이브 순위 | [x] |
| int | 유튜브 뮤직 순위 | [x] |
| int | 애플 뮤직 순위 | [x] |
| int | 벅스 뮤직 순위 | [x] |
#### <표1-수집되는 데이터에 따른 타입과 컬럼명>

각컬럼은Null 값이허용되지않는다 다만 순위의 경우 차트인 차트아웃에 따라 순위에 존재 할 수도 존재하지 않을 수도 있기 때문에 순위의 경우에는 Null 값을허용한다. 또한 국내탑100의 경우에도 해외음원이 존재 할 수있고. 이러한 해외음원이 영어 뿐만 아니라 일본어, 중국어, 혹은 아랍어 일 수도 있기 때문에 노래 제목과 아티스트명, 앨범명의 경우에는 nvarchar를 허용한다.실제 데이터가 저장 되는것은 다음<표2–실제데이터저장> 과같다.  
| `ID` | `날짜` | `제목` | `가수` | `앨범` | `멜론` | `지니` | `바이브` | `유튜브` | `애플` | `벅스` |
| ---: | :---:| :---: | :---: | :---: | :---: |:---: |:---: |:---: |:---: |:---: |
| 1 | 05-05 | 아로하 | 조정석 | 슬기로운 의사생활 OST | 1 | 3| 2 | 6 | 2 | 2 |
| | | | 중 | | | | 략 | | | | 
| 100 | 05-05 | And we go | 성시경 | And we go | 100 | 30 | 55 | - | - | 10 |
#### <표2- 실제 데이터 저장>

### 3. Data Crolling
데이터를 수집하는 사이트는 다음<표3–사이트별 차트순위>와 같이 총6 가지의 사이트를 수집한다.
| `멜론` | `지니` | `바이브` | `유튜브` | `애플` | `벅스` |
| :---: | :---:| :---: | :---: | :---: | :---: |
| ![image](https://user-images.githubusercontent.com/37532168/82537441-fe244680-9b84-11ea-8f61-6dda972ddab2.png) | ![image](https://user-images.githubusercontent.com/37532168/82537448-01b7cd80-9b85-11ea-92f7-63a64926438e.png) | ![image](https://user-images.githubusercontent.com/37532168/82537452-04b2be00-9b85-11ea-87e1-d8596865f7e7.png) | ![image](https://user-images.githubusercontent.com/37532168/82537463-08dedb80-9b85-11ea-9538-b441dc087cb1.png) | ![image](https://user-images.githubusercontent.com/37532168/82537468-0b413580-9b85-11ea-89be-e8c7a8cb8d7a.png) | ![image](https://user-images.githubusercontent.com/37532168/82537475-0d0af900-9b85-11ea-8d45-d65c96b90343.png) | 
#### <표3 – 사이트별 차트순위>

각 사이트별로 매일 동일한 시간대에 차트를 수집한다. 사이트별 데이터 수집이 끝나면 ‘노래제목’ 과 ‘아티스트 명’을 기준으로 각 사이트들의 순위를 병합(merge)한다. 병합된 데이터를 Database 에 다음 <표 2 – 실제 데이터 저장>과 같이 저장한다. 각 사이트의 순위에서 Null 값이 발생 할 수 있다. (특정 노래가 모든 사이트에 대하여 인기순위 100위안에 항상 차트인을 하는 것이 아니기 때문) 이러한 경우 향후 분석에도 특정사이트에만 존재하거나 존재하지 않는 음원을 따로 측정 할 수 있으므로 결측 값 처리를 하지 않는다. 또한 앨범명이 존재 하지 않는 싱글 음원의 경우 (디지털 싱글) 노래의 제목을 앨범명으로 처리한다. 또한 고유값인 ID와 날짜, 노래제목, 아티스트명, 앨범명의 경우 Null 값을 허용하지 않는다. 마찬가지로 노래제목, 아티스트명, 앨범명의 경우 일본어나 중국어 또는 아랍어 등과 같은 Encoding 방식이 다른 언어가 들어갈 경우를 대비하여 nvarchar 형태로 데이터를 저장시킨다.

### 4. 데이터 활용 방안

위 <표2 – 실제 데이터 저장> 와 같이 저장된 데이터를 사용하여 다음과 같은 일을 수행 할 수 있다.
1.	Database 에서 특정 음악에 대하여 일별 순위 변동을 체크 할 수 있다.
2.	특정 음악에 대하여 각 사이트별 순위를 한꺼번에 모아서 볼 수 있다.
3.	어느 플랫폼이 어떠한 종류의 음악을 선호하는지 확인 할 수 있다.
4.	장르에 따른 선호도를 확인 할 수 있다.
5.	해당 월(일) 에 대하여 평균적인 순위를 구해 전체적인 대한민국 국민들이 좋아하는, 좋아했던 노래를 확인 할 수 있게한다.
